import{d as h,c as t,a as w,g as i,t as d,i as y,r as E,q as $}from"./web.CGV0YjKn.js";import{t as l}from"./toast.wqlfmKb2.js";import"./store.wnBxOkpW.js";var N=d('<button class="btn ee gt ip">'),S=d('<button class="btn ee ip">已加载全部文章');const P=()=>{const[f,r]=t(!1),[u,m]=t(1),[p,a]=t(!1);async function g(){r(!0);try{const e=u()+1,o=await fetch(`${window.location.href}/${e}`);if(!o.ok){l.error("没有更多了"),a(!0);return}const b=await o.text(),n=new DOMParser().parseFromString(b,"text/html").querySelector("[data-article-list]");if(!n){l.error("没有更多了"),a(!0);return}const s=document.querySelector("[data-article-list]");s&&Array.from(n.childNodes).forEach(c=>{c.nodeType===Node.ELEMENT_NODE&&s.appendChild(c)}),m(e)}catch(e){console.error("Failed to load more articles",e)}finally{r(!1)}}return w($,{get when(){return!p()},get fallback(){return i(S)},get children(){var e=i(N);return e.$$click=g,y(e,()=>f()?"加载中...":"加载更多文章"),E(),e}})};h(["click"]);export{P as default};
